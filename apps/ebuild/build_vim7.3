#!/bin/bash

    # vim: set number:

# Prerequisites on Debian:
#       sudo apt-get install ncurses-dev xorg-dev libgtk2.0-dev
#

set -x

SKIPTO=${1:-0}      # allow for primitive 'make'-like functionality, by allowing the user to specify a line to skip ahead to


                                mkdir -p ~/apps/bin
                                cd ~/apps
[ $SKIPTO -le $LINENO ] &&      wget -N http://ftp.vim.org/pub/vim/unix/vim-7.3.tar.bz2
[ $SKIPTO -le $LINENO ] &&      tar -xvjf vim-7.3.tar.bz2

                                cd ~/apps/vim73/src

[ $SKIPTO -le $LINENO ] &&      perl -i -ple 's|^#prefix =.*|prefix = $ENV{HOME}/apps|' Makefile
[ $SKIPTO -le $LINENO ] &&      perl -i -ple 's|^#(?=CONF_OPT_MULTIBYTE)||' Makefile
[ $SKIPTO -le $LINENO ] &&      make
[ $SKIPTO -le $LINENO ] &&      make install

                                cd ~/apps/
[ $SKIPTO -le $LINENO ] &&      rm vim-7.3.tar.bz2
